{"id":0,"path":"docs/.vitepress/dist/guides/airnode/quick-start-aws/index.html","content":"[ Skip to content ] (#VPContent) \n[![image] (/./api3-inactive.png)![image] (/./API3-Active.png)Documentation] (/) \nMain Navigation [Home] (/) [Explore] (/explore/) [Guides] (/guides/) \nReference\n[dAPIs] (/reference/dapis/) \n[Airnode] (/reference/airnode/latest/) \n[ChainAPI] (/reference/chainapi/) \n[OIS] (/reference/ois/latest/) \n[QRNG] (/reference/qrng/) \n[DAO Members] (/reference/dao-members/) \nüîç \n[GitHub] (https://github.com/api3dao/api3-docs) [Discord] (https://discord.com/channels/758003776174030948/765618225144266793) \nAppearance\n[GitHub] (https://github.com/api3dao/api3-docs) [Discord] (https://discord.com/channels/758003776174030948/765618225144266793) \nMenu [ Return to top ] (#) \nüìÇ \nSidebar Navigation \n[About the Guides] (/guides/) \n\ndAPIS\n-----\n\n[‚òÖ Getting Started] (/guides/dapis/) [Calling a dAPI] (/guides/dapis/calling-a-dapi.html) [Starter Project] (/guides/dapis/starter-project.html) \n\nAirnode\n-------\n\n[‚òÖ Getting Started] (/guides/airnode/) [Quick Start AWS] (/guides/airnode/quick-start-aws/) [Quick Start GCP] (/guides/airnode/deploy-gcp.html) [Quick Start Docker Container] (/guides/airnode/deploy-container.html) [Making an RRP Request] (/guides/airnode/rrp-request.html) [Using RRP Templates] (/guides/airnode/using-rrp-templates.html) [Monorepo Examples] (/guides/airnode/monorepo-examples.html) \n\nChainAPI\n--------\n\n[‚òÖ Getting Started] (/guides/chainapi/) [Integrate your API] (/guides/chainapi/integrate.html) [Deploy an API Integration] (/guides/chainapi/deploy.html) \n\nQRNG\n----\n\n[‚òÖ Getting Started] (/guides/qrng/) [QRNG Example] (/guides/qrng/qrng-example.html) [Remix Example] (/guides/qrng/remix-example.html) [Youtube QRNG-NFT Example] (/guides/qrng/youtube-nft-example.html) \n\nDAO Members\n-----------\n\n[‚òÖ Getting Started] (/guides/dao-members/) [Staking Tokens] (/guides/dao-members/staking.html) [Working with Proposals] (/guides/dao-members/proposals.html) [How to Vote] (/guides/dao-members/voting.html) [Videos] (/guides/dao-members/videos.html) \nOn this page\nTable of Contents for current page \nüìÇ¬†Guides ‚Üí Airnode\nThe &quot;Quick&quot; series of guides are simple introductions demonstrating the deployment of an Airnode. Configuration files are provided with only minor changes to be made.\nThis guide uses the Airnode [deployer image] (/reference/airnode/latest/docker/deployer-image.html) which deploys the off-chain component of Airnode (a.k.a., the node) to AWS. It uses an API endpoint (GET /simple/price) from [CoinGecko] (https://www.coingecko.com/en/api/documentation) ‚ûö which returns the current value of a coin. This demo does not detail the overall configuration of an Airnode, it is just a quick start guide.\n\nDeployment Files [#] (#deployment-files) \n-------------------------------------------------------------------------------------------\n\nAn Airnode cloud provider deployment uses the Docker image [deployer image] (/reference/airnode/latest/docker/deployer-image.html) which requires three files as input.\n--- [config.json] (#config-json) \n--- [secrets.env] (#secrets-env) \n--- [aws.env] (#aws-env) \nFor the purpose of this guide, these files have been created and only require a few minor changes to make the deployment of the Airnode successful. These changes are needed to supply AWS credentials, a chain provider url, and a mnemonic.\n\nInstall Prerequisites [#] (#install-prerequisites) \n-----------------------------------------------------------------------------------------------------\n\nInstall the [Docker Desktop] (https://docs.docker.com/get-docker/) ‚ûö and launch it.\n\nProject Folder [#] (#project-folder) \n---------------------------------------------------------------------------------------\n\nA project folder is needed for this demo. You can create it manually or download a zip file ready to go.\n@tab:Download\nDownload the [ quick-start-aws] (/zip-files/quick-start-aws-v0.10.zip) project folder.\n@tab:Create Manually\nCreate a folder called /quick-start-aws. Place the contents of the files provided above ( [Deployment Files Configuration] (#deployment-files-configuration) ) into the files shown below.\nquick-start-aws ‚îú‚îÄ‚îÄ aws.env ‚îú‚îÄ‚îÄ config.json ‚îî‚îÄ‚îÄ secrets.env \n1\n2\n3\n4\n\nDeployment Files Configuration [#] (#deployment-files-configuration) \n-----------------------------------------------------------------------------------------------------------------------\n\nPrepare the three configuration files. By default, the Airnode deployer image looks for config.json, secrets.env, and aws.env in the project root directory and writes receipt.json to the project root directory.\n\nconfig.json [#] (#config-json) \n\nconfig.json\njson{ &quot;chains&quot;: [ { &quot;authorizers&quot;: { &quot;requesterEndpointAuthorizers&quot;: [] }, &quot;authorizations&quot;: { &quot;requesterEndpointAuthorizations&quot;: {} }, &quot;contracts&quot;: { &quot;AirnodeRrp&quot;: &quot;0xa0AD79D995DdeeB18a14eAef56A549A04e3Aa1Bd&quot; }, &quot;id&quot;: &quot;4&quot;, &quot;providers&quot;: { &quot;myChainProvider&quot;: { &quot;url&quot;: &quot;${CHAIN_PROVIDER_URL}&quot; } }, &quot;type&quot;: &quot;evm&quot;, &quot;options&quot;: { &quot;fulfillmentGasLimit&quot;: 500000, &quot;gasPriceOracle&quot;: [ { &quot;gasPriceStrategy&quot;: &quot;latestBlockPercentileGasPrice&quot;, &quot;percentile&quot;: 60, &quot;minTransactionCount&quot;: 20, &quot;pastToCompareInBlocks&quot;: 20, &quot;maxDeviationMultiplier&quot;: 2 }, { &quot;gasPriceStrategy&quot;: &quot;providerRecommendedGasPrice&quot;, &quot;recommendedGasPriceMultiplier&quot;: 1.2 }, { &quot;gasPriceStrategy&quot;: &quot;providerRecommendedEip1559GasPrice&quot;, &quot;baseFeeMultiplier&quot;: 2, &quot;priorityFee&quot;: { &quot;value&quot;: 3.12, &quot;unit&quot;: &quot;gwei&quot; } }, { &quot;gasPriceStrategy&quot;: &quot;constantGasPrice&quot;, &quot;gasPrice&quot;: { &quot;value&quot;: 10, &quot;unit&quot;: &quot;gwei&quot; } } ] }, &quot;maxConcurrency&quot;: 100 } ], &quot;nodeSettings&quot;: { &quot;cloudProvider&quot;: { &quot;type&quot;: &quot;aws&quot;, &quot;region&quot;: &quot;us-east-1&quot;, &quot;disableConcurrencyReservations&quot;: true }, &quot;airnodeWalletMnemonic&quot;: &quot;${AIRNODE_WALLET_MNEMONIC}&quot;, &quot;heartbeat&quot;: { &quot;enabled&quot;: false }, &quot;httpGateway&quot;: { &quot;enabled&quot;: true, &quot;maxConcurrency&quot;: 20, &quot;corsOrigins&quot;: [] }, &quot;httpSignedDataGateway&quot;: { &quot;enabled&quot;: false }, &quot;logFormat&quot;: &quot;plain&quot;, &quot;logLevel&quot;: &quot;INFO&quot;, &quot;nodeVersion&quot;: &quot;0.10.0&quot;, &quot;stage&quot;: &quot;tutorial-aws&quot; }, &quot;triggers&quot;: { &quot;rrp&quot;: [ { &quot;endpointId&quot;: &quot;0x6db9e3e3d073ad12b66d28dd85bcf49f58577270b1cc2d48a43c7025f5c27af6&quot;, &quot;oisTitle&quot;: &quot;CoinGecko Basic Request&quot;, &quot;endpointName&quot;: &quot;coinMarketData&quot;, &quot;cacheResponses&quot;: false } ], &quot;http&quot;: [ { &quot;endpointId&quot;: &quot;0x6db9e3e3d073ad12b66d28dd85bcf49f58577270b1cc2d48a43c7025f5c27af6&quot;, &quot;oisTitle&quot;: &quot;CoinGecko Basic Request&quot;, &quot;endpointName&quot;: &quot;coinMarketData&quot; } ], &quot;httpSignedData&quot;: [] }, &quot;templates&quot;: [], &quot;ois&quot;: [ { &quot;oisFormat&quot;: &quot;1.1.2&quot;, &quot;title&quot;: &quot;CoinGecko Basic Request&quot;, &quot;version&quot;: &quot;1.0.0&quot;, &quot;apiSpecifications&quot;: { &quot;servers&quot;: [ { &quot;url&quot;: &quot;https://api.coingecko.com/api/v3&quot; } ], &quot;paths&quot;: { &quot;/simple/price&quot;: { &quot;get&quot;: { &quot;parameters&quot;: [ { &quot;in&quot;: &quot;query&quot;, &quot;name&quot;: &quot;ids&quot; }, { &quot;in&quot;: &quot;query&quot;, &quot;name&quot;: &quot;vs_currencies&quot; } ] } } }, &quot;components&quot;: { &quot;securitySchemes&quot;: {} }, &quot;security&quot;: {} }, &quot;endpoints&quot;: [ { &quot;name&quot;: &quot;coinMarketData&quot;, &quot;operation&quot;: { &quot;method&quot;: &quot;get&quot;, &quot;path&quot;: &quot;/simple/price&quot; }, &quot;fixedOperationParameters&quot;: [], &quot;reservedParameters&quot;: [ { &quot;name&quot;: &quot;_type&quot;, &quot;fixed&quot;: &quot;int256&quot; }, { &quot;name&quot;: &quot;_path&quot;, &quot;fixed&quot;: &quot;api3.usd&quot; }, { &quot;name&quot;: &quot;_times&quot;, &quot;fixed&quot;: &quot;1000000&quot; } ], &quot;parameters&quot;: [ { &quot;name&quot;: &quot;coinIds&quot;, &quot;operationParameter&quot;: { &quot;in&quot;: &quot;query&quot;, &quot;name&quot;: &quot;ids&quot; } }, { &quot;name&quot;: &quot;coinVs_currencies&quot;, &quot;operationParameter&quot;: { &quot;in&quot;: &quot;query&quot;, &quot;name&quot;: &quot;vs_currencies&quot; } } ] } ] } ], &quot;apiCredentials&quot;: [] } \n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n28\n29\n30\n31\n32\n33\n34\n35\n36\n37\n38\n39\n40\n41\n42\n43\n44\n45\n46\n47\n48\n49\n50\n51\n52\n53\n54\n55\n56\n57\n58\n59\n60\n61\n62\n63\n64\n65\n66\n67\n68\n69\n70\n71\n72\n73\n74\n75\n76\n77\n78\n79\n80\n81\n82\n83\n84\n85\n86\n87\n88\n89\n90\n91\n92\n93\n94\n95\n96\n97\n98\n99\n100\n101\n102\n103\n104\n105\n106\n107\n108\n109\n110\n111\n112\n113\n114\n115\n116\n117\n118\n119\n120\n121\n122\n123\n124\n125\n126\n127\n128\n129\n130\n131\n132\n133\n134\n135\n136\n137\n138\n139\n140\n141\n142\n143\n144\n145\n146\n147\n148\n149\n150\n151\n152\n153\n154\n155\n156\n157\n158\n159\n160\n161\n162\n163\n164\n165\n166\n167\n168\n169\n170\n171\n172\nThis file requires no changes on your part. It has been created with just one API endpoint. It will instruct the Airnode to attach to the Rinkeby test network. There are three variables this file will extract (interpolation) from secrets.env.\nNote that nodeSetting.disableConcurrencyReservations has been set to true. This is a precaution for new AWS accounts that have yet to address concurrency management. For production deployments, disableConcurrencyReservations should be set to false. See [disableConcurrencyReservations] (./../../../reference/airnode/latest/understand/configuring-airnode.html#cloudprovider) under the cloudProvider key and [maxConcurrency] (./../../../reference/airnode/latest/understand/configuring-airnode.html#maxconcurrency) for more information.\n\nsecrets.env [#] (#secrets-env) \n\nsecrets.env\nshCHAIN_PROVIDER_URL=&quot;&quot; AIRNODE_WALLET_MNEMONIC=&quot;&quot; \n1\n2\nAdd values for each of the these fields.\nCHAIN_PROVIDER_URL: A chain provider url from a provider such as [Infura] (https://infura.io/) . Make sure the provider url you use is for the Rinkeby test network. Using another chain provider other than Infura is acceptable.\n------Sign-up or login to Infura.\n------Create a new project, select the Settings tab in the project.\n------Copy the URL (https) for Rinkeby under the Endpoints pick list.\nAIRNODE_WALLET_MNEMONIC: Provide the seed phrase (mnemonic) to a digital wallet. For the purpose of this demo it does not need eth in it for the Rinkeby test network. If you don&#39;t have one use the Admin CLI command [generate-airnode-mnemonic] (./../../../reference/packages/admin-cli.html#generate-airnode-mnemonic) to create one or another method you prefer.\n\naws.env [#] (#aws-env) \n\naws.env\nshAWS_ACCESS_KEY_ID= AWS_SECRET_ACCESS_KEY= \n1\n2\nAdd the access credentials to your AWS account. The deployer image will use them to install the Airnode functions to Lambda under your account&#39;s control. If you do not have an account watch this [video] (https://www.youtube.com/watch?v=KngM5bfpttA) to create one. Unlike secrets.env, you cannot surround values with double quotes (&quot;).\n---AWS_ACCESS_KEY_ID: Is ACCESS_KEY_ID in IAM.\n---AWS_SECRET_ACCESS_KEY: Is SECRET_ACCESS_KEY in IAM.\n\nDeploy [#] (#deploy) \n-----------------------------------------------------------------------\n\nMake sure Docker is running and then execute the deployer image from the root of the quick-deploy-aws folder. A receipt.json file will be created upon completion. It contains some deployment information and is used to remove the Airnode.\nWarning about simultaneous deployments\nAvoid running multiple deployments simultaneously as doing so might result in a broken deployment. If this occurs, the standard removal approach may not succeed and [Manual Removal] (../../docker/deployer-image.html#manual-removal) may be required. \nRun the following command to deploy the demo Airnode. Note that the version of api3/airnode-deployer matches the nodeVersion in the config.json file. Normally (for Linux/Mac/WSL2) the deployer image deploy command is run by the user root. This may cause permission issues when the receipt.json file is generated. Optionally you can specify the [UID (user identifier)] (https://en.wikipedia.org/wiki/User_identifier) and [ GID (group identifier)] (https://en.wikipedia.org/wiki/Group_identifier) that the deployer image should use. Do so by setting the environment variables USER_ID and GROUP_ID, otherwise omit the line containing the variables.\n@tab:Linux/Mac/WSL2\nshdocker run -it --rm \\ -e USER_ID=$(id -u) -e GROUP_ID=$(id -g) \\ -v &quot;$(pwd):/app/config&quot; \\ api3/airnode-deployer:0.10.0 deploy \n1\n2\n3\n4\n@tab:Windows\nFor Windows, use CMD (and not PowerShell).\nbatchdocker run -it --rm ^ -v &quot;%cd%:/app/config&quot; ^ api3/airnode-deployer:0.10.0 deploy \n1\n2\n3\n\nTest the Airnode [#] (#test-the-airnode) \n-------------------------------------------------------------------------------------------\n\nAfter a successful deployment the Airnode can be tested directly using the [HTTP Gateways] (./../../../reference/airnode/latest/understand/http-gateways.html) without accessing the blockchain. You provide endpoint parameters to get a response from an integrated API.\n\nHTTP Gateway [#] (#http-gateway) \n\nLooking at the [config.json] (./config-json.html) code snippet below shows the HTTP gateway was activated for the Airnode. Furthermore the endpoint for /simple/price (with an endpointId of 0x6...af6) has been added to triggers.http[n]. Only those endpoints added to the http array can be tested.\njson&quot;nodeSettings&quot;: { ... &quot;httpGateway&quot;: { &quot;enabled&quot;: true, // The gateway is activated for this Airnode &quot;maxConcurrency&quot;: 20, &quot;corsOrigins&quot;: [] }, ... }, &quot;triggers&quot;: { &quot;rrp&quot;: [ { &quot;endpointId&quot;: &quot;0x6db9e3e3d073ad12b66d28dd85bcf49f58577270b1cc2d48a43c7025f5c27af6&quot;, &quot;oisTitle&quot;: &quot;CoinGecko Basic Request&quot;, &quot;endpointName&quot;: &quot;coinMarketData&quot;, &quot;cacheResponses&quot;: false } ], &quot;http&quot;: [ { &quot;endpointId&quot;: &quot;0x6db9e3e3d073ad12b66d28dd85bcf49f58577270b1cc2d48a43c7025f5c27af6&quot;, &quot;oisTitle&quot;: &quot;CoinGecko Basic Request&quot;, &quot;endpointName&quot;: &quot;coinMarketData&quot;, } ], ... } \n1\n2\n3\n4\n5\n6\n7\n8\n9\n10\n11\n12\n13\n14\n15\n16\n17\n18\n19\n20\n21\n22\n23\n24\n25\n26\n27\n\nExecute Endpoint [#] (#execute-endpoint) \n\nUse CURL to execute the Airnode and get the results from the CoinGecko endpoint /simple/price bypassing the Rinkeby test network that Airnode was deployed for. As an alternative to CURL try an app such as [Insomnia] (https://insomnia.rest/) or [Postman] (https://www.postman.com/product/rest-client/) . Windows users can also use [Windows Subsystem for Linux] (https://docs.microsoft.com/en-us/windows/wsl/install) (WSL2) to run CURL for Linux.\nIn order to test an endpoint make a HTTP POST request with the endpointId as a path parameter, the Content-Type header set to application/json and place the endpoint parameter in the request body as a key/value pair.\n----X: POST\n----H: The Content-Type using the value of application/json.\n----d: Use request body data to pass the endpoint parameter key/value pair.\nURL:\n&lt;httpGatewayUrl&gt;/0xf466b8feec41e9e50815e0c9dca4db1ff959637e564bb13fefa99e9f9f90453c\n---&lt;httpGatewayUrl&gt;: The base URL to the gateway including the secret UUID path parameter, displayed in the terminal at the end of an Airnode deployment using a [Docker image] (./../../docker/) . Update the placeholder in the CURL example below with its value.\n---0xf466b8feec41e9e50815e0c9dca4db1ff959637e564bb13fefa99e9f9f90453c: Passed as a path parameter, the endpointId to call, see triggers.rrp[0].endpointId in the config.json file.\n\nRequest [#] (#request) \n\n@tab:Linux/Mac/WSL2\nshcurl -v \\ -X POST \\ -H &#39;Content-Type: application/json&#39; \\ -d &#39;{&quot;parameters&quot;: {&quot;coinIds&quot;: &quot;api3&quot;, &quot;coinVs_currencies&quot;: &quot;usd&quot;}}&#39; \\ &#39;&lt;httpGatewayUrl&gt;/0x6db9e3e3d073ad12b66d28dd85bcf49f58577270b1cc2d48a43c7025f5c27af6&#39; \n1\n2\n3\n4\n5\n@tab:Windows\nshcurl -v ^ -X POST ^ -H &quot;Content-Type: application/json&quot; ^ -d &quot;{\\&quot;parameters\\&quot;: {\\&quot;coinIds\\&quot;: \\&quot;api3\\&quot;, \\&quot;coinVs_currencies\\&quot;: \\&quot;usd\\&quot;}}&quot; ^ &quot;&lt;httpGatewayUrl&gt;/0x6db9e3e3d073ad12b66d28dd85bcf49f58577270b1cc2d48a43c7025f5c27af6&quot; \n1\n2\n3\n4\n5\n\nResponse [#] (#response) \n\njson{ &quot;encodedValue&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000362b30&quot;, &quot;rawValue&quot;: { &quot;api3&quot;: { &quot;usd&quot;: 3.55 } }, &quot;values&quot;: [&quot;3550000&quot;] } \n1\n2\n3\n4\n5\n6\n7\n8\n9\nNote the JSON response values is the API3 price multiplied by 1e6, which results from setting the _times reserved parameter to 1000000 in config.json. This manipulation is necessary in order to correctly handle floating point numbers. \n---encodedValue: This is the only field that gets sent to a requester (smart contract) on-chain. It is the encoded bytes of the values field. A requester must decode it to read the response values. \n---rawValue: The API&#39;s response to Airnode. Presented by the HTTP gateway as a convenience. This is never sent to a requester on-chain. \n---values: A array of values after they are [extracted and converted] (../../../reference/packages/adapter.html#conversion) from the encodedValue to the target type, in this case api3.usd from _path in [reservedParameters] (../../../reference/specifications/reserved-parameters.html) . The HTTP gateway provides this as a convenience and never sends the decoded values to a requester on-chain. \n\nRemove the Airnode [#] (#remove-the-airnode) \n-----------------------------------------------------------------------------------------------\n\nWhen you are done with this demo you can remove the deployed Airnode. The following command uses the receipt.json file that was created when the Airnode was deployed.\n@tab:Linux/Mac/WSL2\nshdocker run -it --rm \\ -v &quot;$(pwd):/app/config&quot; \\ api3/airnode-deployer:0.10.0 remove-with-receipt \n1\n2\n3\n@tab:Windows\nFor Windows, use CMD (and not PowerShell).\nbatchdocker run -it --rm ^ -v &quot;%cd%:/app/config&quot; ^ api3/airnode-deployer:0.10.0 remove-with-receipt \n1\n2\n3\n\nSummary [#] (#summary) \n-------------------------------------------------------------------------\n\nYou have deployed an Airnode on AWS and tested it using the HTTP gateway that was enabled as part of the Airnode deployment. The Airnode, upon deployment, started contacting the AirnodeRrpV0 contract on the Rinkeby testnet to gather any requests made by requesters to this Airnode. This tutorial did not address making a request as its purpose was simply to quickly deploy a functional Airnode.\nLearn more about AWS resources that Airnode uses in the [Cloud Resources] (./../../../reference/cloud-resources.html) doc.\n[Previous page‚òÖ Getting Started] (/guides/airnode/) \n[Next pageQuick Start GCP] (/guides/airnode/deploy-gcp.html) \nReleased under the MIT License.\nCopyright ¬© 2019-present API3\n"}